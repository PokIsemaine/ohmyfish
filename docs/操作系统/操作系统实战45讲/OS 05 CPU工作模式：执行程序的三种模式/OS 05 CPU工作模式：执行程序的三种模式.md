# OS 05 CPU工作模式：执行程序的三种模式

### 1.实模式下能寻址多大的内存空间？实模式为什么采用内存分段模式

**地址总线决定了cpu所能访问的最大内存空间的大小**

实模式下的**寻址空间跟地址总线的个数是密切相关**的，早期的 x86 物理机，虽然寄存器是 16 位，但是**地址总线却有 20 根**。

也就是要$2^{20}$的寻址空间，但寄存器只有16位，也就是只有$2^{16}$的空间。

为了解决这个问题，我们可以讲段寄存器左移四位，然后加上一个通用寄存器。就得到了$2^{16}*2^{4}+2^{16}$的内存空间地址

### 2.保护模式段寄存器16位，为啥还有64位影子寄存器？实模式有影子寄存器吗？

影子寄存器靠硬件来操作，**对系统程序员不可见**，是硬件为了减少损耗设计的段描述符的高速缓存。我们说的16位段寄存器没有包括影子寄存器这部分。

实模式也有影子寄存器，CPU刚加电的和reset的时候还是实模式，影子寄存器里也是有值的，还需要重新加载

### 3.为什么不把段寄存器也升级为32位





### 4.分段模式有什么缺陷

### 5.为什么x86 CPU不能直接使用分页模型，现在有能直接使用分页模型的架构吗

分段模型是由硬件规定的，程序员无法改变

### 6.为何保护模式最后才做权限检查
