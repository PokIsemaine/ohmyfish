# 第4章 从一条记录说起：InnoDB记录存储结构

## 4.1 准备工作

解决以下问题

* 表中的数据到底存到了哪里?
* 以什么格式存放的? 
* `MySQL` 以什么方式来访问这些数据?

## 4.2 InnoDB 页简介

InnoDB 是 一 个将表中的数据存储到磁盘上的存储引擎 ， 即使我们关闭并重启服务器 ，数据还是存在.而真正处理数据 的过程发生在内存中，所以需要把磁盘中的数据加载到内存中.如果是处理写入或修改请求 ，还需要把内存中的内容刷新到磁盘上 

**一个个从磁盘读出来太慢了，InnoDB把数据划分为页，将其作为磁盘和内存交换的基本单位**

`innodb_page_size`表明了 `InnoDB`的页大小，只有第一次初始化`MySQL`数据目录的时候指定，之后就不能改了

## 4.3 InnoDB 行格式

我们平时都是以记录为单位向表中插入数据的，这些记录在磁盘上的存放形式也被称为行格式或者记录格式

`InnoDB`有4种不同类型的行格式 `COMPACT` 、 `REDUNDANT `、 `DYNAMIC` 和 `COMPRESSED`

### 4.3.1 指定行格式的语法

可以在创建或修改标的语句中指定记录所使用的行格式

```mysql
CREATE TABLE 表名 (列的信息) ROW_FORMAT=行格式名称;

ALTER TABLE 表名 ROW_FORMAT=行格式名称;
```

### 4.3.2 COMPACT 行格式

![image-20220331171118432](https://s2.loli.net/2022/03/31/IcxHEUaq8ZRv4by.png)

记录的额外信息

* 变长字段长度列表：真正的数据内容，数据占用的字节数（按字节数逆序存放
* NULL值列表

### 4.3.3 REDUNDANT 行格式



### 4.3.4 溢出列



### 4.3.5 DYNAMIC 行格式 和 COMPRESSED 行格式

