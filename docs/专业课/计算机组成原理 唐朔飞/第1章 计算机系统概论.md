# 第1章 计算机系统概论

## 1.1 计算机系统简介

### 1.1.1 计算机的软硬件概念

* 计算机系统由硬件和软件两部分组成
* 计算机性能的好坏取决于软硬件功能的总和
* 计算机软件可分为两大类：系统软件和应用软件
* 系统软件主要用来管理整个计算机程序，监视服务，是系统资源合理调度，高效运行
* 应用软件是根据用户需要所编制的各种程序

### 1.1.2 计算机系统的层次结构

![image-20211229182026577](https://s2.loli.net/2021/12/29/8KWCpjTbXS6mV14.png)

### 1.1.3 计算机组成和计算机体系结构

* 要区分计算机结构和计算机组成的概念

* 计算机体系结构是指那些能够被程序员所看到的计算机系统的属性

* 计算机组成是指如何实现计算机结构所体现的属性，包含了许多对程序元来说是透明的硬件细节（本书重点）

	

## 1.2 计算机的基本组成

### 1.2.1 冯诺依曼计算机的特点

* 计算机由运算器、存储器、控制器、输入设备和输出设备五大部件构成
* 指令和数据以同等地位存放于存储器内，并可按地址寻访
* 指令和数据均用二进制数表示
* 指令由操作码和地址码组成，操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置
* 指令在存储器中顺序存放，通常顺序执行。在特定条件下可根据运算结果或者设定的条件改变执行顺序
* 机器以运算器为中心，输入输出设备与存储器间的数据传送通过运算器完成

### 1.2.2 计算机的硬件框图

![image-20211229182824607](https://s2.loli.net/2021/12/29/Tkl1L8wOZRBxFUe.png)

* 运算器用来完成算术运算和逻辑运算，并将运算结果的中间结果存放在运算器内
* 存储器用来存放数据和程序
* 控制器用来控制指挥程序和数据的输入、运行以及处理运算结果
* 输入设备将人们熟悉的信息形式转化为机器能识别的信息形式
* 输出设备将机器的运算结果以人们熟悉的信息形式是输出



* 计算机的五大部件在控制器的统一指挥下，有条不紊地自动工作
* 运算器和控制器在逻辑关系和电路结构上联系紧密，通常集成在同一芯片上，统称为中央处理器 CPU
* 把输入设备与输出设备简称为 I/O 设备

* 现代计算器可以认为由三大部分组成：CPU、I/O设备、主存储器

* CPU 与主存储器和起来可以称为主机，I/O 设备又可以称为外部设备

	![image-20211229183447128](https://s2.loli.net/2021/12/29/k6vWrsnZ3EoI2Gl.png)

* 主存储器是存储子系统的一类，用来存放程序和数据，可以直接与 CPU 交换信息。另一类是辅助存储器，又称外存
* ALU 和 CU 是
	* 算术逻辑单元 ALU 用来完成算术逻辑运算
	* 控制单元 CU 用来解释存储器中的指令，并发出各种操作命令来执行指令。I/O设备也受 CU 控制
	* ALU 和 CU 是 CPU 的核心部件

### 1.2.3 计算机的工作步骤

计算机解决一个实际问题分两部：上机前各种准备，上机运行

#### 上机前各种准备

1. 建立数学模型
2. 确定计算方法
3. 编制解题程序



#### 计算机的工作过程

1. 取指
2. 分析
3. 执行
4. 打印结果

![image-20211229185520639](https://s2.loli.net/2021/12/29/hoYMy6iJOZTwGEA.png)

**主存储器(简称主存或内存)**

* 包括存储体M,各种逻辑部件以及控制电路
* 存储体由若干个存储单元构成，每个存储单元里的一串二进制代码为存储子，二进制代码的位数为存储字长
* 主存的工作方式就是按存储单元的地址号来实现对存储字各位的存取
* 存取方式：按地址存取，即按地址访问地址访问存储器。大大提高了存储空间利用利用率，取指令和取数据可以认为是相同操作
* MAR 是存储器地址寄存器，拿来存要访问的存储单元的地址，位数对应存储单元的个数
* MDR 是存储器数据寄存器，拿来存放从存储体某单元取出的代码或者准备放入的代码

**运算器**

* 至少包括3个寄存器和一个算术逻辑单元
* ACC 为累加器、MQ为乘商寄存器、X为操作数寄存器

**控制器**

* 由程序计数器 PC 、指令寄存器 IR 以及控制单元 CU 组成
* PC 存放当前要执行指令的地址，主存的 MAR 之间有直接通路。有自动加 1 功能，生成下一条指令地址
* IR 存放当前的指令(来自 MAR)，IR中的操作码 OP 送到 CU,地址码 AD 作为操作数的地址送到存储器的 MAR
* CU 用来分析当前指令所需操作，发出微操作命令序列用以控制所有被控对象
* 流程
	1.  取指：从命令存储器读出一条指令
	2. 分析：指出该指令要完成什么杨的操作，并按寻址特征指明操作数的地址
	3. 执行：根据操作数所在地址以及指令的操作码完成操作

**I/O**

* I/O 子系统包括各种 I/O 设备 以及其相应的接口
* 每种 I/O 设备都由 I/O 接口与主机联系，接收 CU 发出的各种控制命令，并完成相应的操作

## 1.3 计算机硬件的主要技术指标

### 1.3.1 机器字长

* CPU 一次能处理数据的位数，通常与 CPU 的寄存器有关
* 字长越长，数的表示范围越大，精度越高
* 机器字长也会影响机器的运算速度，短了就要计算多次
* 机器字长影响造价，他将直接影响加法器（或 ALU ）、数据总线、存储字节的位数
* 机器字长的确定不能单从精度和数的表示范围来考虑

### 1.3.2 存储容量

* 存储器的容量应该包括主存容量和辅存容量
* 主存容量是主存中放二进制代码的总位数，$存储容量=存储单元个数*存储字长$
* 通常用字节数描述容量的大小

### 1.3.3 运算速度

* 早期采用吉普森法，综合考虑每条指令的指向那个时间以及它们在全部操作中占的百分比$T_M=\sum_{i=1}^nf_it_i$
* 现在机器衡量运算速度
	* 现在机器运算普遍采用单位时间内执行的指令平均条数来衡量，并用$MIPS (百万条指令每秒)$作为计量单位。
	* $CPI$即指向一条指令所需的时钟周期（机器主频的倒数）来衡量
	* $FLOPS$浮点运算次数每秒来衡量运算速度