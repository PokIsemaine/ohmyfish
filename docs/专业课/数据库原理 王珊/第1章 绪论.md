# 第 1 章 绪论



## 1.1 数据库系统概述

### 1.1.1 数据库的 4 个基本概念

1.数据（Data）

* 数据是数据库中存储的基本对象

* 定义为描述事务的符号记录
* 数据的含义称为语义，数据与其语义是不可分的。

2.数据库（DataBase，DB）

* 存放数据的仓库
* 长期存储在计算机内，有组织的，可共享的大量数据的集合
* 数据库中的数据按一定的数据模型组织、描述和储存，**有较小冗余度、较高数据独立性和易扩展性，并可为各种用户共享**
* **三个基本特点：长久存储 、有组织 和可共享**

3.数据库管理系统（DataBase Management System,DBMS）

* 位于用户与操作系统之间的一层数据管理软件
* 数据库管理系统和操作系统一样是计算机的基础软件。

* 功能
	* 数据定义功能：提供数据定义语言（DDL）
	* 数据组织、存储和管理
	* 数据操纵功能：提供数据操纵语言（DML）
	* 数据库的事务管理和运行管理
	* 数据库的建立和维护功能

4.数据库系统（DataBase System,DBS）

* 数据库系统由**数据库（DB），数据库管理系统(DBMS)，应用程序和数据库管理员(DBA)组成的**存储、管理、处理和维护数据的系统。



### 1.1.2 数据管理技术的产生和发展

1.人工管理阶段

* 数据不保存
* 应用程序管理数据
* 数据不共享
* 数据不具有独立性

2.文件系统阶段

* 数据可以长期保存
* 由文件系统管理数据
* 缺点
	* 数据共享性差、冗余度大、数据不一致性
	* 数据独立性差

3.数据库系统阶段

从文件系统到数据库系统标志着数据管理技术的飞跃

数据库系统的出现使信息系统从一加工数据的程序为中心转向围绕共享的数据库为中心的新阶段



* 数据结构化

	* 与文件系统的本质区别
	* 数据面向整个组织或企业，数据之间也有联系

* 数据的共享性高、冗余度低且容易扩充

	* 数据共享可以大大减少冗余，节约存储空间
	* 数据共享还能避免数据之间的不相容性和不一致性（同意数据不同副本的值不一样）
	* 结构化的数据使得数据库系统弹性大容易扩充

* 数据独立性高

	* 物理独立性：用户的应用程序与数据库中数据的无力存储是相互独立的
	* 逻辑独立性：用户的应用程序与数据库的逻辑结构是相互独立的
	* **数据独立性由数据库管理系统提供的二级映像功能来保证**

* 数据由数据库管理系统统一管理和控制

	* 数据的安全性保护：保护数据以防止不合法使用造成的数据泄漏和破坏
	* 数据的完整性检查：数据的完整性指数据的正确性、有效性和相容性
	* 并发控制
	* 数据库恢复：数据库管理系统必须具有将数据库从错误状态恢复到某一已知的正确状态的功能

	

综上所述

**数据库是长期存储在计算机内有组织、大量、共享的数据集合。他可以供各种用户共享，具有最小冗余度和较高的数据独立性。**

数据库管理系统在数据库建立、运用和维护时对数据库进行统一控制，以保证数据的完整性和安全性，并在多用户同时使用数据库时进行并发控制，在发生故障后对数据库进行恢复



## 1.2 数据模型

数据模型是对现实世界数据特征的抽象

数据模型是用来描述数据、组织数据和对数据进行操作的

数据模型是数据库系统的核心和基础



### 1.2.1 两类数据模型

**第一类：概念模型**

也称信息模型，是按**用户的观点**来对数据和信息建模，主要用于数据库设计



 **第二类：逻辑模型和物理模型**

**逻辑模型是按计算机系统的观点对数据建模**，主要用于数据库管理系统的实现

* 层次模型
* 网状模型
* 关系模型
* 面向对象数据模型
* 对象关系模型
* 半结构化数据模型

物理模型是对数据最底层的抽象

* 描述数据在系统内部的表示方式和存取方法，或在磁盘或磁带上的存储方法和存取方法，**是面向计算机系统的**
* 具体实现是数据库管理系统的任务，数据库设计人员要了解和选择物理模型，最终用户则不必考虑物理级的细节





![image-20220505102442667](https://s2.loli.net/2022/05/05/WKcC1SepFnkPMBx.png)

为了把现实世界中的具体事物抽象、组织为某一数据库管理系统支持的数据模型，**人们常常将现实世界抽象为信息世界，然后将信息世界抽象为机器世界**



现实世界到概念模型的转换：数据库设计人员

概念模型到逻辑模型的转换：数据库设计人员、数据库设计工具

逻辑模型到物理模型：数据库管理系统



### 1.2.2 概念模型

**1.信息世界中的基本概念**

* 实体：客观存在并可相互区分的事物
* 属性：实体具有的某一特性
* 码：唯一标识实体的属性集
* 实体型：用实体名及其属性名集合来抽象和刻画同类实体，称为实体型
* 实体集：同一类型实体的集合
* 联系：实体内部的联系通常是指组成书体的各属性之间的联系，不同实体之间的联系通常是指不同实体集之间的联系
	* 一对一、一对多、多对多联系



**2.实体-联系方法 E-R**



### 1.2.3 数据模型的组成要素

数据模型是严格定义的一组概念的集合。这些概念精确地描述了系统的静态特性、动态特性和完整性约束条件

**数据模型通常由数据结构、数据操作和数据的完整性约束三部分组成**



* 数据结构：描述数据库的组成对象以及对象之间的联系
	* 数据结构是所描述的对象类型的集合，是对**系统静态特性**的描述
* 数据操作：是对数据库中各种对象的实例允许执行的操作的集合，包括操作及有关的操作规则
	* 数据操作是对**系统动态特性**的描述
* 数据的完整性约束条件：数据的完整性约束条件是一组完整性规则



### 1.2.4 常用的数据模型

* 格式化模型：数据结构的单位是基本层次联系（一对多、一对一）
	* 层次模型
	* 网状模型
* 关系模型
* 面向对象数据模型
* 对象关系数据模型
* 半结构化数据模型



### 1.2.5 层次模型

**1层次模型的数据结构**

一棵倒立的树，结点的双亲唯一

条件

* 有且只有一个节点没有双亲节点（根节点）
* 根意外的其他节点有且只有一个双亲节点（双亲节点唯一）



每个节点表示一个记录类型，记录类型之间的联系用结点之间的连线（有向边）表示，这种联系是父子之间一**对多的联系**



**2层次模型的数据操纵与完整性约束**

数据操纵：增删改查

增删改查的时候要满足完整性约束条件

* 没有双亲节点就不能插入子女节点值
* 删除双亲节点，子女结点也一起删除



**3层次模型的优缺点**

优点

* 层次模型的数据结构比较简单清晰
* 层次数据库的查询效率高
* 层次模型提供了良好的完整性支持

缺点

* 多对多联系不适合层次模型

* 如果有多个双亲节点，也不适合层次模型。需要引入冗余数据或创建非自然数据结构

* 查询子女节点必须通过双亲节点

* 结构严密，层次命令趋于程序化

	

### 1.2.6 网状模型

网状数据模型的典型代表是 DBTG 系统，也称 CODASYL 系统



**1网状模型的数据结构**

条件

* 允许一个以上节点无双亲
* 一个结点可以有多于一个的双亲（子女节点与双亲节点联系不唯一）



网状模型比层次模型更具有普遍性



**2网状模型的数据操纵与完整性约束**

完整性约束条件不像层次模型那么严格但也有限制

* 支持记录码的概念，码即唯一表示记录的数据项的集合，不允许出现重复值
* 保证一个联系中双亲记录和子女记录之间是一对多的联系
* 支持双亲记录和子女记录某些约束条件
	* 没有双亲节点就不能插入子女节点值
	* 删除双亲节点，子女结点也一起删除



**3网状模型的优缺点**

优点

* 能够更直接描述现实世界
* 具有良好的性能，存取效率较高

缺点

* 结构比较复杂，不利于最终用户掌握
* 网状模型的 DDL、DML复杂要嵌入某种高级语言用户不容易掌握、不易使用
* 应用程序访问数据时必须选择适当的存取路径，必须了解系统结构细节，加重负担



### 1.2.7 关系模型

**1关系模型的数据结构**

* 关系：一个关系对应一张表
* 元组：表中的一行即一个元祖
* 属性：表中的一列即为一个属性，给每一个属性起一个名称即属性名
* 码：表中的某个属性组，可以唯一缺点一个元组
* 域：域是一组具有相同数据类型的值的集合。属性的取值范围来自某个域
* 分量：元组中的一个属性值
* 关系模式：对关系的描述，一般表示为： 关系名（属性1, 属性2, ... ,属性n)

![image-20220505105945246](https://s2.loli.net/2022/05/05/RgzAnox6DjYeC9S.png)



**2关系模型的数据操纵与完整性约束**

数据操纵：增删改查



关系的完整性

* 实体完整性
* 参照完整性
* 用户定义的完整性



关系模型中的数据操作是集合操作，操作对象和操作结果都是关系



关系模型把存取路径向用户隐藏起来，用户只要指出干什么找什么即可，不必详细说明怎么干怎么找



**3关系模型的优缺点**

优点

* 与格式化模型不同，建立在严格的数学概念的基础上
* 关系模型的概念单一，结构简单，清晰易懂
* 关系模型的存取路径对用户透明，具有更高数据独立性、安全保密性，简化开发工作



缺点

* 存取路径对用户隐藏，查询效率往往不如格式化数据模型



## 1.3 数据库系统的结构

数据库应用开发人员角度：数据库通常采用三级结构，这是数据库系统内部的系统结构

最终用户角度：单用户结构、主从结构、分布式结构、客户-服务器、浏览器-应用服务器/数据库服务器多层次结构，这是数据库系统外部的体系结构

### 1.3.1 数据库系统模式的概念

* 在数据库模型中有型号和值的概念
	* 型是指某一类数据的结构和属性的说明
	* 值是型的一个具体赋值

模式与实例

* 模式是数据库中全体数据的逻辑结构和特征的描述
* 模式的一个具体值称为实例，同一个模式可以有很多实例
* 模式是相对稳定的，实例是相对变动的



### 1.3.2 数据库系统的三级模式结构

数据库系统的三级模式结构是指数据库系统由外模式、模式和内模式三级构成

![image-20220505111803457](https://s2.loli.net/2022/05/05/KYnC4bdfvJZsVRt.png)





**1模式**

模式也称逻辑模式，是数据库中**全体数据的逻辑结构和特征的描述**，是所有用户的公共数据视图

* 数据库系统模式结构的中间层，既不设计数据的物理存储细节和硬件环境，又与具体的应用程序、开发工具以及高级程序设计语言无关
* 是数据库数据在逻辑级上的视图
* **一个数据库只有一个模式**
* 是内模式的逻辑表示
* 数据库管理系统提供模式定义语言（模式 DLL） 来严格定义模式
	* 定义数据的逻辑结构
	* 定义数据之间的联系，定义与数据有关的安全性、完整性要求



**2外模式**

外模式也称子模式或用户模式，它是数据库用户（包括应用程序员和最终用户）能够看见和使用的**局部数据的逻辑结构和特征的描述**，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示

* 外模式通常是模式的子集
* **一个数据库可以有多个外模式，一个应用程序只能一个外模式，一个外模式可以被多个应用程序使用**
* 不同用户应用需求、看待数据方式、数据保密要求存在差异，所以外模式描述也不同
* 外模式是保证数据库安全性的有力措施
* 数据库管理系统提供外模式定义语言（外模式 DLL） 来严格定义模式



**3内模式**

内模式也称存储模式，一个数据库只有一个内模式。它是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式



### 1.3.3 数据库的二级映像功能与数据独立性

为了能够在系统内部实现三个模式抽象层次的联系和转换，数据库管理系统在这三级模式之间提供了两层映像：外模式/模式映像 和 模式/内模式映像



**外模式/模式映像**

对于每一个外模式，数据库都有一个外模式/模式映像，它定义了该外模式与模式之间的对应关系。这些映像定义通常包含在各自外模式的描述中



当模式改变是，由数据库管理员对各个外模式/模式的映像作相应改变，可以使外模式保持不变。应用程序是根据数据的外模式编写的，从而应用程序不必修改，**保证了数据与程序的逻辑独立性**，简称数据的逻辑独立性



 **模式/内模式映像**

模式/内模式映像是唯一的，它定义了数据全局逻辑结构与存储结构之间的对应关系



当数据库的存储结构改变时，由数据库管理员对模式/内模式映像做出相应改变，可以使模式保持不变，从而应用程序也保持不变。**保证了数据与程序的物理独立性**，简称数据的物理独立性



## 1.4 数据库系统的组成

* 硬件平台
	* 内存
	* 磁盘
	* 较高通道能力
* 软件
	* 数据库管理系统
	* 操作系统
	* 编译系统
	* 应用开发工具
* 人员
	* 数据库管理员 DBA
		* 决定数据库中的信息内容和结构
		* 决定数据库的存储结构和存取策略
		* 定义数据库的安全性要求和完整性约束条件
		* 监控数据库的使用和运行
		* 数据库的改进和重组、重构
	* 系统分析员和数据库设计人员
	* 应用程序员
	* 用户（最终用户）
		* 偶然用户
		* 简单用户
		* 复杂用户