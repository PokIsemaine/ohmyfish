## 第5章树

### 基本概念

树是由n个结点组成的有限集合

n=0为空树

n>0有一个结点为根只有后继结点，其他结点划分为m个互不相交的有限集合，每个集合本身是一棵树，称之为根的子树。每个子树的根节点有且只有一个直接前驱，但可以有0个或多个后继



下面概念看PPT

度，树的度，叶子结点（终端结点），分支结点（非终端结点），内部结点，孩子，双亲，兄弟，祖先和子孙，层数，树的深度或高度，堂兄弟，无序树，有序树，结点的次序，最左结点（长子），次子，森林（删除一棵树的根就能得到一个森林），



### 二叉树概念和性质

**特点：**

每个结点最多有两棵子树

二叉树的子树有左右之分不可以颠倒，只有一棵子树树也必须分清左右子树



**二叉树的性质：**

* 第i层最多有$2^{i-1}$

* 深度为k的二叉树最多有$2^k-1$结点

* 叶节点树数为$n_0$,度数为2的结点数为$n_2$,$n_0=n_2+1$

* 令二叉树的分支数（所有结点的度数和）为B , $n_0+n_1+n_2=B+1=n=n_1+2*n_2+1$

* n个结点的二叉树：高最多为$n$，最低为$\lfloor log_2n \rfloor+1$(完全二叉树)





**树的叶子和其他结点的关系**

度为m的树中度为$0,1,2,……m$的结点数分别为$n_0,n_1,n_2……n_m$可以得到下面两个式子
$$
n=n_0+n_1+……n_m\\
n=B+1=1*n_1+2*n_2+m*n_m+1
$$
所以叶子结点数为$n_0=1+\sum_{i=1}^m(i-1)n_i$



满二叉树：深度为k且有$2^k-1$个结点的二叉树，不存在度为1的结点

满m叉树：第k层有



**完全二叉树：**

深度为k,n个结点的二叉树，当且仅当每个结点和深度为k的满二叉树编号从1-n的结点一一对应

性质

* 叶子结点只可能在层次最大的两层上出现
* 结点无左子女那么一定没有右子女
* 度为1的结点数为$(n+1)%2$
* 度为0的结点数（叶子结点）为$\lfloor(n+1)/2\rfloor$
* 度为2的结点数为$\lfloor(n+1)/2\rfloor-1$
* 二叉树：度数为0的结点数=度数为2的结点数+1
* 编号最大的分支结点是$\lfloor n/2\rfloor$编号最小的叶子结点是$\lfloor n/2\rfloor$+1
* 具有n个结点的完全二叉树的深度$k=\lfloor log_2n\rfloor+1$
* 如果对一棵有n个结点的完全二叉树按层次次序从1开始编号，则对任意结点i有：

​		i=1,序号结点是根

​		i>1,其双亲结点是$\lfloor i/2 \rfloor$

​		2i<=n,序号为i的结点的左子女结点的序号为2i

​		2i>n序号为i的结点没有左子女

​		2i+1<=n,序号为i的结点的右子女结点的序号为2i+1

​		2i+1>n,序号为i的结点的没有右子女结点



### 二叉树的存储

#### 顺序存储

按满二叉树的结点层次编号，依次次存储

#### 链式存储

二叉链表

**在n个结点的二叉链表中有n+1个空指针域**

三叉链表

### 二叉树的遍历

遍历结果：产生一个关于结点的线性序列

可能的次序：先序DLR,中序LDR,后序LRD，逆先序DRL，逆中序RDL，逆后序RLD

如果先序遍历和后序遍历相反，那么只有一个叶子结点



### 线索二叉树

查找先序下的后继结点

查找后序下的前驱结点

X是中序线索二叉树中有左孩子的结点且不为根，X的前驱是X的左子树最右结点

### 树和森林

树林：m棵互不相交的树所组成的集合

#### 树的存储结构

**双亲表示法：**

一组连续空间存储树的结点，附设一个指示器指示父节点位置

优点：容易找到父节点及其所有的祖先，能找到结点的子女和兄弟

缺点：找结点的子女和兄弟比较费事，可能要遍历整个数组

**孩子表示法：**

结点表中每个元素包含一个子表，存放该结点所有子结点，结点表顺序存放，子表用链接表示

优点：求某个结点的子女运算和结点的全部子女很容易

缺点：求某个结点的父母比较困难

**孩子兄弟表示法：**

二叉链表存储树就是这种

树的每个结点除了信息域外，增加指针指向第一个子女和下一个兄弟的指针

优点：求根，判树空，求长子，求结点有兄弟容易

缺点：求父节点困难

#### 树，森林和二叉树转换

**树与二叉树转换：**

树转化成的二叉树其右子树一定为空，形态唯一



**森林转换成二叉树：**

每个树分别转化为二叉树，根节点用线连接，以第一棵树为根转

森林中叶子结点个数等于二叉树中左边孩子指针为空的结点个数



二叉树右指针为空个数=总的空指针域-左孩子指针为空的结点个数

总的空指针域：森林有n个非终端结点，假设总结点个数为m,那么m-n个叶子结点，总共有2m个指针域





**二叉树转为森林或树：**

抹去根节点与右孩子连线（区分兄弟），将孤立的二叉树还原成树

#### 树和森林的遍历

树的先根遍历=转化后二叉树的先序遍历

树的后根遍历=转化后二叉树的中序遍历

#### 哈夫曼树

* 带权路径长度最短树
* $WPL=\sum_{k=1}^nW_kL_k$
* 哈夫曼树只有度为0和2的结点
* 权值大的结点离根结点近
* n个叶子的哈夫曼树的形态一般不唯一，但是WPL相同
* n个叶子的哈夫曼树有2n-1个结点
* 总结点数个数（多于1时）不能为偶数
* **n个权值均不相同的**（注意前提）字符构成哈夫曼树：树中一定没有度为1的结点，树中权值最小的结点一定是兄弟结点，树中任意非叶结点的权值一定不小于下一层任意结点的权值