<h1 align="center">ğŸ“” C++ Primer 0x04 ç»ƒä¹ é¢˜è§£</h1>

## 4.1 åŸºç¡€

### 4.1.2 ä¼˜å…ˆçº§ä¸ç»“åˆå¾‹

> 4.1 è¡¨è¾¾å¼ 5 + 10 * 20 / 2 çš„æ±‚å€¼ç»“æœæ˜¯å¤šå°‘

105

> 4.2 æ ¹æ® 4.12èŠ‚ä¸­çš„è¡¨ï¼Œåœ¨ä¸‹è¿°è¡¨è¾¾å¼çš„åˆç†ä½ç½®æ·»åŠ æ‹¬å·ï¼Œä½¿å¾—æ·»åŠ æ‹¬å·åï¼Œè¿ç®—å¯¹è±¡çš„ç»„åˆé¡ºåºä¸æ·»æ‹¬å·å‰ä¸€è‡´

```cpp
(a) *vec.begin()
(b) *vec.begin() + 1
```

```cpp
(a) *(vec.begin())
(b) (*(vec.begin())) + 1
```

### 4.1.3 æ±‚å€¼é¡ºåº

> 4.3 C++è¯­è¨€æ²¡æœ‰æ˜ç¡®è§„å®šå¤§å¤šæ•°äºŒå…ƒè¿ç®—ç¬¦çš„æ±‚å€¼é¡ºåºï¼Œç»™ç¼–è¯‘å™¨ä¼˜åŒ–ç•™ä¸‹äº†ä½™åœ°ã€‚è¿™ç§ç­–ç•¥å®é™…ä¸Šæ˜¯åœ¨ä»£ç ç”Ÿæˆæ•ˆç‡å’Œç¨‹åºæ½œåœ¨ç¼ºé™·ä¹‹é—´è¿›è¡Œäº†æƒè¡¡ï¼Œä½ è®¤ä¸ºè¿™å¯ä»¥æ¥å—å—ï¼Ÿè¯·è¯´å‡ºä½ çš„ç†ç”±ã€‚

å¯ä»¥æ¥å—ï¼Œç»™äº†ç¨‹åºå‘˜æ›´å¤šè‡ªç”±ï¼ŒC++ ä¿¡ä»»ç¨‹åºå‘˜ï¼Œå½“ç„¶è¿™ä¹Ÿè¦æ±‚æˆ‘ä»¬æœ‰è¾ƒé«˜çš„æ°´å¹³äº†ã€‚



## 4.2ç®—æœ¯è¿ç®—ç¬¦

> 4.4 åœ¨ä¸‹é¢çš„è¡¨è¾¾å¼ä¸­æ·»åŠ æ‹¬å·ï¼Œè¯´æ˜å…¶æ±‚å€¼è¿‡ç¨‹åŠæœ€ç»ˆç»“æœã€‚ç¼–å†™ç¨‹åºç¼–è¯‘è¯¥ï¼ˆä¸åŠ æ‹¬å·çš„ï¼‰è¡¨è¾¾å¼å¹¶è¾“å‡ºç»“æœéªŒè¯ä¹‹å‰çš„æ¨æ–­ã€‚

 ```cpp
 12 / 3 * 4 + 5 * 15 + 24 % 4 / 2
 ```



```cpp
((12 / 3) * 4) + (5 * 15) + ((24 % 4) / 2)
//16 + 75 + 0
//91
```



> 4.5 å†™å‡ºä¸‹åˆ—è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœã€‚

```cpp
-30 * 3 + 21 / 5  //-86
-30 + 3 * 21 / 5  //-18
30 / 3 * 21 % 5   //0
-30 / 3 * 21 % 4  //-2
```



> 4.6 å†™å‡ºä¸€æ¡è¡¨è¾¾å¼ç”¨äºç¡®å®šä¸€ä¸ªæ•´æ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ã€‚

```cpp
if(i&1){/*...*/}
```



> 4.7 æº¢å‡ºæ˜¯ä½•å«ä¹‰ï¼Ÿå†™å‡ºä¸‰æ¡å°†å¯¼è‡´æº¢å‡ºçš„è¡¨è¾¾å¼ã€‚

å½“è®¡ç®—çš„ç»“æœè¶…å‡ºè¯¥ç±»å‹æ‰€èƒ½è¡¨ç¤ºçš„èŒƒå›´æ—¶å°±ä¼šäº§ç”Ÿæº¢å‡ºã€‚

```cpp
short short_value = 32767; short_value += 1;
unsigned unsigned_value = 0; unsigned_value -=1;
unsigned short uunsigned_short_svalue = 65535; ++uunsigned_short_svalue; 
```



## 4.3é€»è¾‘å’Œå…³ç³»è¿ç®—ç¬¦ 

> 4.8 è¯´æ˜åœ¨é€»è¾‘ä¸ã€é€»è¾‘æˆ–åŠç›¸ç­‰æ€§è¿ç®—ç¬¦ä¸­è¿ç®—å¯¹è±¡çš„æ±‚å€¼é¡ºåºã€‚

* é€»è¾‘ä¸é€»è¾‘æˆ–æ±‚å€¼é¡ºåºä¸ºçŸ­è·¯æ±‚å€¼
* ç›¸ç­‰è¿ç®—æœªå®šä¹‰æ±‚å€¼é¡ºåº



> 4.9 è§£é‡Šåœ¨ä¸‹é¢çš„ if è¯­å¥ä¸­æ¡ä»¶éƒ¨åˆ†çš„åˆ¤æ–­è¿‡ç¨‹ã€‚

```cpp
const char *cp = "Hello World";
if (cp && *cp)
```

å¦‚æœcpä¸æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå†çœ‹*cpï¼Œä¹Ÿå°±æ˜¯'H'ã€‚ç»“æœä¸ºçœŸ



> 4.10 ä¸º while å¾ªç¯å†™ä¸€ä¸ªæ¡ä»¶ï¼Œä½¿å…¶ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ•´æ•°ï¼Œé‡åˆ° 42 æ—¶åœæ­¢ã€‚

```cpp
int x;
while(cin>>x && x!=42){/*...*/}
```



> 4.11 ä¹¦å†™ä¸€æ¡è¡¨è¾¾å¼ç”¨äºæµ‹è¯•4ä¸ªå€¼aã€bã€cã€dçš„å…³ç³»ï¼Œç¡®ä¿aå¤§äºbã€bå¤§äºcã€cå¤§äºdã€‚

```cpp
a > b && b > c && c > d
```



> 4.12 å‡è®¾ i ã€j å’Œ k æ˜¯ä¸‰ä¸ªæ•´æ•°ï¼Œè¯´æ˜è¡¨è¾¾å¼i != j < kçš„å«ä¹‰ã€‚

é¦–å…ˆçœ‹j<kï¼Œå¦‚æœj<kè¿”å›å€¼ä¸ºtrue,è¡¨è¾¾å¼å˜ä¸º i != 1

å¦‚æœj<kä¸ºå‡è¿”å›å€¼ä¸ºfalse,è¡¨è¾¾å¼å˜ä¸º i !=0

æœ€ç»ˆè¿”å›çš„ç»“æœè¿˜æ˜¯å¸ƒå°”å€¼

**æ³¨æ„ `true` å’Œ `false` å˜ä¸º `int` çš„è¿‡ç¨‹**



## 4.4èµ‹å€¼è¿ç®—ç¬¦

> 4.13 åœ¨ä¸‹è¿°è¯­å¥ä¸­ï¼Œå½“èµ‹å€¼å®Œæˆå i å’Œ d çš„å€¼åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ

```cpp
int i;   double d;
d = i = 3.5; // i = 3, d = 3.0
i = d = 3.5; // d = 3.5, i = 3
```



> 4.14 æ‰§è¡Œä¸‹è¿° if è¯­å¥åå°†å‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ

```cpp
if (42 = i)   // èµ‹å€¼è¿ç®—ç¬¦çš„å·¦ä¾§è¿ç®—å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„å·¦å€¼ï¼Œç¼–è¯‘æŠ¥é”™
if (i = 42)   // çœŸ
```



> 4.15 ä¸‹é¢çš„èµ‹å€¼æ˜¯éæ³•çš„ï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ

```cpp
double dval; int ival; int *pi;
dval = ival = pi = 0;
```

`ival = pi` è¿™éƒ¨åˆ†ä¼šå‡ºé”™ï¼Œ`pi` æ˜¯æŒ‡é’ˆä¸èƒ½èµ‹å€¼ç»™ `ival`

```cpp
double dval; int ival; int *pi;
dval = ival = 0;
pi = 0;
```



> 4.16 å°½ç®¡ä¸‹é¢çš„è¯­å¥åˆæ³•ï¼Œä½†å®ƒä»¬å®é™…æ‰§è¡Œçš„è¡Œä¸ºå¯èƒ½å’Œé¢„æœŸå¹¶ä¸ä¸€æ ·ï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ

```cpp
if (p = getPtr() != 0)//èµ‹å€¼è¿ç®—ç¬¦ä¼˜å…ˆçº§ä½
if (i = 1024)//åŒºåˆ†èµ‹å€¼è¿ç®—ç¬¦å’Œç›¸ç­‰è¿ç®—ç¬¦
```

```cpp
if ((p = getPtr()) != 0)
if (i == 1024)
```



## 4.5 é€’å¢å’Œé€’å‡è¿ç®—ç¬¦

> 4.17 è¯´æ˜å‰ç½®é€’å¢è¿ç®—ç¬¦å’Œåç½®é€’å¢è¿ç®—ç¬¦çš„åŒºåˆ«ã€‚

å‰ç½®ç‰ˆæœ¬æŠŠå€¼+1åç›´æ¥è¿”å›äº†è¿ç®—å¯¹è±¡(å·¦å€¼ï¼‰ï¼›åç½®ç‰ˆæœ¬éœ€è¦æŠŠåŸå§‹å€¼å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿è¿”å›æœªä¿®æ”¹çš„å†…å®¹ï¼ˆå³å€¼ï¼‰



> 4.18  å¦‚æœ132é¡µé‚£ä¸ªè¾“å‡º vector å¯¹è±¡å…ƒç´ çš„ while å¾ªç¯ä½¿ç”¨å‰ç½®é€’å¢è¿ç®—ç¬¦ï¼Œå°†å¾—åˆ°ä»€ä¹ˆç»“æœï¼Ÿ

ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹è¾“å‡ºï¼Œæœ€ç»ˆä¼šå¯¹ end è§£å¼•ç”¨ï¼Œå‡ºé”™



> 4.19 å‡è®¾`ptr`çš„ç±»å‹æ˜¯æŒ‡å‘`int`çš„æŒ‡é’ˆã€`vec`çš„ç±»å‹æ˜¯`vector`ã€`ival`çš„ç±»å‹æ˜¯`int`ï¼Œè¯´æ˜ä¸‹é¢çš„è¡¨è¾¾å¼æ˜¯ä½•å«ä¹‰ï¼Ÿå¦‚æœæœ‰è¡¨è¾¾å¼ä¸æ­£ç¡®ï¼Œä¸ºä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ

```cpp
(a) ptr != 0 && *ptr++  //å¦‚æœptréç©ºï¼Œå¹¶ä¸”ptræŒ‡å‘çš„å€¼ä¸ºçœŸï¼Œé‚£ä¹ˆptræŒ‡å‘ä¸‹ä¸€ä¸ª
(b) ival++ && ival //å¦‚æœivalä¸ºçœŸå¹¶ä¸”ival+1ä¹Ÿä¸ºçœŸï¼Œé‚£ä¹ˆç»“æœä¸ºçœŸ
(c) vec[ival++] <= vec[ival] //ä¸æ­£ç¡®ï¼Œæ²¡æœ‰è§„å®š<=ä¸¤ä¾§çš„æ±‚å€¼é¡ºåº
//(c) ä¿®æ”¹
// vec[ival] <= vec[ival+1]
```



## 4.6 æˆå‘˜è®¿é—®è¿ç®—ç¬¦

> 4.20 å‡è®¾`iter`çš„ç±»å‹æ˜¯`vector<string>::iterator`, è¯´æ˜ä¸‹é¢çš„è¡¨è¾¾å¼æ˜¯å¦åˆæ³•ã€‚å¦‚æœåˆæ³•ï¼Œè¡¨è¾¾å¼çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä¸åˆæ³•ï¼Œé”™åœ¨ä½•å¤„?

```cpp
(a) *iter++;//è¿”å›è¿­ä»£å™¨æ‰€æŒ‡å…ƒç´ åè¿­ä»£å™¨é€’å¢1
(b) (*iter)++;//ä¸åˆæ³• string ä¸æ”¯æŒé€’å¢è¿ç®—ç¬¦
(c) *iter.empty();//ä¸åˆæ³•ï¼Œè§£å¼•ç”¨è¿ç®—ç¬¦ä¼˜å…ˆçº§æ¯”ç‚¹è¿ç®—ç¬¦ä½
(d) iter->empty();//åˆ¤æ–­è¿­ä»£å™¨æ‰€æŒ‡å…ƒç´ æ˜¯å¦ä¸ºç©º
(e) ++*iter;//ä¸åˆæ³• string ä¸æ”¯æŒé€’å¢è¿ç®—ç¬¦
(f) iter++->empty();//åˆ¤æ–­è¿­ä»£å™¨æ‰€æŒ‡å…ƒç´ æ˜¯å¦ä¸ºç©ºç„¶åè¿­ä»£å™¨é€’å¢
```



## 4.7 æ¡ä»¶è¿ç®—ç¬¦

> 4.21 ç¼–å†™ä¸€æ®µç¨‹åºï¼Œä½¿ç”¨æ¡ä»¶è¿ç®—ç¬¦ä»`vector<int>`ä¸­æ‰¾åˆ°å“ªäº›å…ƒç´ çš„å€¼æ˜¯å¥‡æ•°ï¼Œç„¶åå°†è¿™äº›å¥‡æ•°å€¼ç¿»å€ã€‚

```cpp
#include <iostream>
#include <vector>

using std::vector;
using std::cout;

int main(){
	vector<int>vec={1,2,3,4,5};
	for(auto &v:vec)v=(v&1?2*v:v); 
	for(auto v:vec)cout << v <<" ";
    return 0;
}
```



> 4.22 æœ¬èŠ‚çš„ç¤ºä¾‹ç¨‹åºå°†æˆç»©åˆ’åˆ†ä¸º`high pass`ã€`pass` å’Œ `fail` ä¸‰ç§ï¼Œæ‰©å±•è¯¥ç¨‹åºä½¿å…¶è¿›ä¸€æ­¥å°† 60 åˆ†åˆ° 75 åˆ†ä¹‹é—´çš„æˆç»©è®¾å®šä¸º`low pass`ã€‚è¦æ±‚ç¨‹åºåŒ…å«ä¸¤ä¸ªç‰ˆæœ¬ï¼šä¸€ä¸ªç‰ˆæœ¬åªä½¿ç”¨æ¡ä»¶è¿ç®—ç¬¦ï¼›å¦ä¸€ä¸ªç‰ˆæœ¬ä½¿ç”¨1ä¸ªæˆ–å¤šä¸ª`if`è¯­å¥ã€‚å“ªä¸ªç‰ˆæœ¬çš„ç¨‹åºæ›´å®¹æ˜“ç†è§£å‘¢ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

```cpp
#include <iostream>
#include <string>

using std::cout;
using std::cin;
using std::string;

int main(){
	int grade;cin>>grade;
	string finalgrade = (grade > 90) ? "hight pass" 
									: (grade < 60) ? "fail" : "pass";
	cout << finalgrade;
	return 0;
}
```



```cpp
#include <iostream>
#include <string>

using std::cout;
using std::cin;
using std::string;

int main(){
	int grade;cin>>grade;
	string finalgrade;
	
	if(grade > 90)finalgrade = "hight pass";
	else if(grade >= 60)finalgrade = "pass";
	else finalgrade = "fail";
	cout << finalgrade;

	return 0;
}
```

ç¬¬äºŒä¸ªç‰ˆæœ¬å¥½ï¼ŒåµŒå¥—å¤šäº†æ¡ä»¶è¿ç®—ç¬¦å¯è¯»æ€§é™ä½ï¼Œif else æ›´æ¸…æ™°



> 4.23 å› ä¸ºè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é—®é¢˜ï¼Œä¸‹é¢è¿™æ¡è¡¨è¾¾å¼æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚æ ¹æ®4.12èŠ‚ä¸­çš„è¡¨æŒ‡å‡ºå®ƒçš„é—®é¢˜åœ¨å“ªé‡Œï¼Ÿåº”è¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ

```cpp
string s = "word";
string pl = s + s[s.size() - 1] == 's' ? "" : "s" ;
```

åŠ æ³•ä¼˜å…ˆçº§é«˜äºæ¡ä»¶è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œå› æ­¤ç­‰ä»·äºä¸‹é¢çš„ä»£ç 

```cpp
string s = "word";
string pl = (s + s[s.size() - 1]) == 's' ? "" : "s" ;
```

ä¿®æ”¹ä¸º

```cpp
string s = "word";
string pl = s + (s[s.size() - 1] == 's' ? "" : "s") ;
```



> 4.24  æœ¬èŠ‚çš„ç¤ºä¾‹ç¨‹åºå°†æˆç»©åˆ’åˆ†ä¸º`high pass`ã€`pass`ã€å’Œ`fail`ä¸‰ç§ï¼Œå®ƒçš„ä¾æ®æ˜¯æ¡ä»¶è¿ç®—ç¬¦æ»¡è¶³å³ç»“åˆå¾‹ã€‚å‡å¦‚æ¡ä»¶è¿ç®—ç¬¦æ»¡è¶³çš„æ˜¯å·¦ç»“åˆå¾‹ï¼Œæ±‚å€¼çš„è¿‡ç¨‹å°†æ˜¯æ€æ ·çš„ï¼Ÿ

```cpp
string finalgrade = (grade > 90) ? "hight pass" 
									: (grade < 60) ? "fail" : "pass";
```

å¦‚æœå·¦ç»“åˆå¾‹é‚£ä¹ˆç­‰ä»·äº

```cpp
string finalgrade = ((grade > 90) ? "hight pass" 
									: (grade < 60)) ? "fail" : "pass";
```



## 4.8 ä½è¿ç®—ç¬¦

> 4.25 å¦‚æœä¸€å°æœºå™¨ä¸Š`int`å 32ä½ã€`char`å 8ä½ï¼Œç”¨çš„æ˜¯`Latin-1`å­—ç¬¦é›†ï¼Œå…¶ä¸­å­—ç¬¦`'q'` çš„äºŒè¿›åˆ¶å½¢å¼æ˜¯`01110001`ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼`~'q' << 6`çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

`char` å…ˆæå‡æˆ `int`

`00000000 00000000 00000000 01110001`

ç„¶åå–å

`11111111 11111111 11111111 10001110`

ç„¶åå·¦ç§»åŠ¨6ä½

`11111111 11111111 11100011 10000000`



> 4.26 åœ¨æœ¬èŠ‚å…³äºæµ‹éªŒæˆç»©çš„ä¾‹å­ä¸­ï¼Œå¦‚æœä½¿ç”¨`unsigned int` ä½œä¸º`quiz1` çš„ç±»å‹ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ

æœªå®šä¹‰ï¼Œæœ‰çš„æœºå™¨ `unsigned int `åªæœ‰16ä½



> 4.27 ä¸‹åˆ—è¡¨è¾¾å¼çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ

```cpp
unsigned long ul1 = 3, ul2 = 7;
(a) ul1 & ul2 //011 3
(b) ul1 | ul2 //111 7
(c) ul1 && ul2//true
(d) ul1 || ul2 //true
```

`ul1 = 011`

`ul2 = 111`



## 4.9 sizeof è¿ç®—ç¬¦

> 4.28 ç¼–å†™ä¸€æ®µç¨‹åºï¼Œè¾“å‡ºæ¯ä¸€ç§å†…ç½®ç±»å‹æ‰€å ç©ºé—´çš„å¤§å°ã€‚

```cpp
#include<iostream>
using namespace std;

int main(){
	cout << "bool size = " << sizeof(bool) <<" bytes" << endl;
	cout << "char size = " << sizeof(char) <<" bytes" << endl;
	cout << "wchar_t size = " << sizeof(wchar_t) <<" bytes" << endl;
	cout << "char16_t size = " << sizeof(char16_t) <<" bytes" << endl;
	cout << "char32_t size = " << sizeof(char32_t) <<" bytes" << endl;
	cout << "short size = " << sizeof(short) <<" bytes" << endl;
	cout << "int size = " << sizeof(int) <<" bytes" << endl;
	cout << "long size = " << sizeof(long) <<" bytes" << endl;
	cout << "long long  size = " << sizeof(long long) <<" bytes" << endl;
	cout << "float size = " << sizeof(float) <<" bytes" << endl;
	cout << "double size = " << sizeof(double) <<" bytes" << endl;
	cout << "long double size = " << sizeof(long double) <<" bytes" << endl;
	return 0;
}

```



> 4.29 æ¨æ–­ä¸‹é¢ä»£ç çš„è¾“å‡ºç»“æœå¹¶è¯´æ˜ç†ç”±ã€‚å®é™…è¿è¡Œè¿™æ®µç¨‹åºï¼Œç»“æœå’Œä½ æƒ³è±¡çš„ä¸€æ ·å—ï¼Ÿå¦‚ä¸ä¸€æ ·ï¼Œä¸ºä»€ä¹ˆï¼Ÿ

```cpp
int x[10];   int *p = x;
cout << sizeof(x)/sizeof(*x) << endl;//10
//sizeof ä¸ä¼šæŠŠæ•°ç»„åå­—è½¬æˆæŒ‡é’ˆï¼Œsizeof(x)å¤§å°ä¸ºæ•°ç»„å†…å…ƒç´ å¤§å°ä¹‹å’Œ
cout << sizeof(p)/sizeof(*p) << endl;//2
//p æ˜¯int* ç±»å‹ sizeof(p) = 8
```



> 4.30 æ ¹æ®4.12èŠ‚ä¸­çš„è¡¨ï¼Œåœ¨ä¸‹è¿°è¡¨è¾¾å¼çš„é€‚å½“ä½ç½®åŠ ä¸Šæ‹¬å·ï¼Œä½¿å¾—åŠ ä¸Šæ‹¬å·ä¹‹åçš„è¡¨è¾¾å¼çš„å«ä¹‰ä¸åŸæ¥çš„å«ä¹‰ç›¸åŒã€‚

```cpp
(a) sizeof x + y      
(b) sizeof p->mem[i]  
(c) sizeof a < b     
(d) sizeof f() 
```

```cpp
(a) (sizeof x) + y      
(b) sizeof (p->mem[i])  
(c) (sizeof a) < b     
(d) sizeof (f()) 
```

## 4.10 é€—å·è¿ç®—ç¬¦

> 4.31 æœ¬èŠ‚çš„ç¨‹åºä½¿ç”¨äº†å‰ç½®ç‰ˆæœ¬çš„é€’å¢è¿ç®—ç¬¦å’Œé€’å‡è¿ç®—ç¬¦ï¼Œè§£é‡Šä¸ºä»€ä¹ˆè¦ç”¨å‰ç½®ç‰ˆæœ¬è€Œä¸ç”¨åç½®ç‰ˆæœ¬ã€‚è¦æƒ³ä½¿ç”¨åç½®ç‰ˆæœ¬çš„é€’å¢é€’å‡è¿ç®—ç¬¦éœ€è¦åšå“ªäº›æ”¹åŠ¨ï¼Ÿä½¿ç”¨åç½®ç‰ˆæœ¬é‡å†™æœ¬èŠ‚çš„ç¨‹åºã€‚

å‰ç½®ç‰ˆæœ¬æŠŠå€¼+1åç›´æ¥è¿”å›äº†è¿ç®—å¯¹è±¡ï¼›åç½®ç‰ˆæœ¬éœ€è¦æŠŠåŸå§‹å€¼å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿è¿”å›æœªä¿®æ”¹çš„å†…å®¹

```cpp
#include <vector>
#include <iostream>
using namespace std;

int main(){
	vector<int>ivec(10);
	vector<int>::size_type cnt =ivec.size();
	
	for(vector<int>::size_type ix = 0; ix != ivec.size(); ix++, --cnt)
		ivec[ix] = cnt;
	
	for(auto v:ivec)cout << v << " ";
	return 0;
}

```



> 4.32 è§£é‡Šä¸‹é¢è¿™ä¸ªå¾ªç¯çš„å«ä¹‰

```cpp
constexpr int size = 5;
int ia[size] = { 1, 2, 3, 4, 5 };
for (int *ptr = ia, ix = 0;ix != size && ptr != ia+size;++ix, ++ptr) 
{
    /* ... */ 
}
```

  å¾ªç¯éå†æ•°ç»„ ia å¹¶è®¡æ•°



> 4.33 æ ¹æ®4.12èŠ‚ä¸­çš„è¡¨è¯´æ˜ä¸‹é¢è¿™æ¡è¡¨è¾¾å¼çš„å«ä¹‰

```cpp
someValue ? ++x, ++y : --x, --y
```

ç­‰ä»·

```cpp
(someValue ? ++x, ++y : --x), --y
```

å¦‚æœ `somevalue`ä¸ºçœŸï¼Œé‚£ä¹ˆæ‰§è¡Œ `++x`å’Œ`++y`,è¿”å›`y`ã€‚ç„¶åä¸¢æ‰`y`å€¼ï¼Œæ‰§è¡Œ`--y`,è¿”å›`yå€¼`

å¦‚æœ `somevalue`ä¸ºå‡ï¼Œé‚£ä¹ˆæ‰§è¡Œ `--x`,è¿”å›`x`ã€‚ç„¶åä¸¢æ‰`x`å€¼ï¼Œæ‰§è¡Œ`--y`,è¿”å›`yå€¼`

```cpp
#include <vector>
#include <iostream>
using namespace std;

int main(){
	int x=10,xx=10,y=0,yy=0;
	bool somevalue = true;
	cout << (somevalue ? ++x,++y:--x) << endl;//è¾“å‡º1
	cout << ((somevalue ? ++xx,++yy:--xx),--yy) << endl;//è¾“å‡º0	
	return 0;
}
```



## 4.11 ç±»å‹è½¬æ¢

### 4.11.1 ç®—æœ¯è½¬æ¢

> 4.34 æ ¹æ®æœ¬èŠ‚ç»™å‡ºçš„å˜é‡å®šä¹‰ï¼Œè¯´æ˜åœ¨ä¸‹é¢çš„è¡¨è¾¾å¼ä¸­å°†å‘ç”Ÿä»€ä¹ˆæ ·çš„ç±»å‹è½¬æ¢ï¼š

```cpp
(a) if (fval)//è½¬ä¸ºbool
(b) dval = fval + ival;//ivalè½¬ä¸ºfloat,æœ€ç»ˆç»“æœè½¬ä¸ºdouble
(c) dval + ival * cval;//cvalè½¬ä¸ºintï¼Œival*cvalç»“æœè½¬ä¸ºdouble
```



> 4.35 å‡è®¾æœ‰å¦‚ä¸‹çš„å®šä¹‰ï¼š

```cpp
char cval;
int ival;
unsigned int ui;
float fval;
double dval;
```

è¯·å›ç­”åœ¨ä¸‹é¢çš„è¡¨è¾¾å¼ä¸­å‘ç”Ÿäº†éšå¼ç±»å‹è½¬æ¢å—ï¼Ÿå¦‚æœæœ‰ï¼ŒæŒ‡å‡ºæ¥ã€‚

```cpp
(a) cval = 'a' + 3;//'a'è½¬ä¸ºint,æœ€ç»ˆè½¬ä¸ºchar
(b) fval = ui - ival * 1.0;//ivalè½¬ä¸ºdouble,uiè½¬ä¸ºdouble,æœ€ç»ˆè½¬ä¸ºfloat
(c) dval = ui * fval;//uiè½¬ä¸ºfloatï¼Œæœ€ç»ˆè½¬ä¸ºdouble
(d) cval = ival + fval + dval;//ival è½¬ä¸ºfloat,ç›¸åŠ ç»“æœè½¬ä¸ºdouble,æœ€ç»ˆç»“æœè½¬ä¸ºchar
```

### 4.11.3 æ˜¾ç¤ºè½¬æ¢

> 4.36 å‡è®¾ `i` æ˜¯`int`ç±»å‹ï¼Œ`d` æ˜¯`double`ç±»å‹ï¼Œä¹¦å†™è¡¨è¾¾å¼ `i*=d` ä½¿å…¶æ‰§è¡Œæ•´æ•°ç±»å‹çš„ä¹˜æ³•è€Œéæµ®ç‚¹ç±»å‹çš„ä¹˜æ³•ã€‚

```cpp
i*=static_cast<int>(d);
```



> 4.37 ç”¨å‘½åçš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ”¹å†™ä¸‹åˆ—æ—§å¼çš„è½¬æ¢è¯­å¥

```cpp
int i; double d; const string *ps; char *pc; void *pv;
(a) pv = (void*)ps;
(b) i = int(*pc);
(c) pv = &d;
(d) pc = (char*)pv;
```

```cpp
(a) pv = static_cast<void*>(const_cast<string*>(ps));
(b) i = static_cast<int>((*pc));
(c) pv = static_cast<void*>((&d));
(d) pc = static_cast<char*>(pv);
```



> 4.38 è¯´æ˜ä¸‹é¢è¿™æ¡è¡¨è¾¾å¼çš„å«ä¹‰ã€‚

```cpp
double slope = static_cast<double>(j/i);
```

`j/i`å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º`double`ç„¶åèµ‹å€¼ç»™`slope`
